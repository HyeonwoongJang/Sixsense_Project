{% extends 'user/base.html' %}

{% block title %}
Í≤åÏãúÍ∏Ä ÏûêÏÑ∏ÌûàÎ≥¥Í∏∞
{% endblock %}

{% block content %}
<div class="container timeline-container text-body-secondary" style="width: 900px">
    <div class="row">
        <!-- Í≤åÏãúÍ∏Ä ÎîîÌÖåÏùº -->
        <div style="float: center;">
            <div class="row">
                <div class="col-md-12 mb-2">
                    <div style="float: right; display:flex; gap:5px;">
                        {% if request.user.id != tem_post_detail.username.id %}
                            <form action="/post/bookmark/{{tem_post_detail.id}}/" method="post">
                            {% csrf_token %}
                            {% if tem_bookmark %}
                            <button class="btn btn-link text-danger">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" version="1.0" viewBox="0 0 512 512">
                                    <path d="M97.3 1.5c-13.4 3.6-24.1 12.3-30 24.3l-3.8 7.6-.3 227.5c-.2 250.2-.7 233 5.8 242 3.7 5.1 11.5 9.1 17.7 9.1 5.7 0 13.3-3 19.6-7.8 2.9-2.2 34.7-29 70.7-59.7 36-30.6 66.9-56.4 68.5-57.3 4.2-2.3 18.8-2.3 23 0 1.7.9 32.9 27.2 69.5 58.4 36.6 31.1 68.5 58.2 71 60 14.4 10.6 30.4 7.4 37.4-7.6l2.1-4.5.3-227.5c.3-254.2.9-234-6.8-245.8-6.1-9.5-16.2-16.6-27.1-19.1-2.9-.7-58-1-158.4-1C127.2.1 101.7.4 97.3 1.5z"/>
                                </svg>
                            </button>
                            <!-- <button class="delbtn" type="submit">üìò</button> -->
                            {% else %}
                            <button class="btn btn-link text-danger">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" version="1.0" viewBox="0 0 512 512">
                                    <path d="M69.5 1.4C57.6 4.3 46.2 13.9 41.8 24.8l-2.3 5.7v451l2.3 5.7c6.7 16.5 26.2 27.2 43.8 23.9 8.8-1.6 14.9-4.8 22.5-11.8 3.4-3.2 38-36.3 76.7-73.5 38.8-37.3 70.8-67.8 71.2-67.8.4 0 32.4 30.5 71.2 67.7 85 81.8 82.1 79.1 88.3 81.9 20.7 9.5 46.5-.1 54.7-20.4l2.3-5.7v-451l-2.3-5.7c-2.9-7.1-10.3-15.5-16.9-19.1-11.2-6 .3-5.7-197.8-5.6-138.4.1-182.2.4-186 1.3zM429 253.2v210.2l-8.2-8c-16.6-16-153.5-147.1-159-152.3l-5.8-5.4-5.7 5.4c-5.6 5.2-142.5 136.3-159.1 152.3l-8.2 8V43h346v210.2z"/>
                                </svg>
                            </button>
                            <!-- <button class="delbtn" type="submit">üìï</button> -->
                            {% endif %}
                            </form>
                            <form action="/post/like/{{tem_post_detail.id}}/" method='POST'>
                            {% csrf_token %}
                            {% if tem_likes %}
                            <button class="btn btn-link text-danger">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-suit-heart-fill" viewBox="0 0 16 16">
                                    <path d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"/>
                                </svg>
                            </button>
                            {% else %}
                            <button class="btn btn-link text-danger">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-suit-heart" viewBox="0 0 16 16">
                                    <path d="m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z"/>
                                </svg>
                            </button>
                            {% endif %}
                        {% endif %}
                        </form>
                    </div>
                    <br>
                    <br>
                    <div class="card"
                    style=" text-align: center;">
                    <h5>{{tem_post_detail.title}}</h5>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <div style="text-align: left">
                        <span>{{ tem_post_detail.username.nickname }} | {{ tem_post_detail.created_at|timesince }} Ï†Ñ
                            |</span>
                        </div>
                        
                        {% if request.user.id == tem_post_detail.username.id %}
                        <div style="float: right; display:flex; gap:5px;">
                            <a href="/post/update/{{tem_post_detail.id}}/">
                                <button class="badge bg-success">ÏàòÏ†ï</button>
                            </a>
                            <form action="/post/delete/{{ tem_post_detail.id }}/" method="post">
                                {% csrf_token %}
                                <button type="submit" class="badge bg-danger">ÏÇ≠Ï†ú</button>
                            </form>
                        </div>
                            {% endif %}
                    </div>
                    <div class="card" style="margin-top: 5px;">
                        <div class="card-body">
                            <div class="media">
                                <div style="display: flex; justify-content: center;">
                                    <img src="/media/{{tem_post_detail.image}}" onerror="this.style.display='none'"
                                        width="400px" height="300px"
                                        style="object-fit:fill; margin : 10px 0px 30px 0px;" />
                                </div>
                                <div class="media-bod">
                                    <pre class="mt-0" style="text-align: center; font-family: 'Dongle', sans-serif; font-size: 40px;">{{ tem_post_detail.content }}</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
           
             <!-- ÎåìÍ∏Ä ÏûëÏÑ± ÌïòÎäî Í≥≥ -->
            <form class="input-group mb-3" action="/post/comment/{{tem_post_detail.id}}/" method="post">
                {% csrf_token %}
                <input type="text" class="form-control" name='content' placeholder="ÎåìÍ∏ÄÏùÑ ÏûëÏÑ± Ìï¥ Ï£ºÏÑ∏Ïöî" />
                <button class="btn btn-outline-secondary" type="submit">ÏûëÏÑ±</button>
            </form>
            <hr>
            <!-- Î∞òÎ≥µÎ¨∏Ïù¥ Îì§Ïñ¥ Í∞à Í≥≥ -->
            {% for c in tem_comments %}
            <div class="row">
                <div class="col-md-12">
                    <div class="media">
                        <div class="media-body">
                            <h5 class="mt-0"> {{ c.content }} </h5>
                            <span> {{ c.user.nickname }} </span>
                            <span> - {{ c.created_at | timesince }} Ï†Ñ</span>
                        </div>
                        {% if request.user.id == c.user.id %}
                        <div style="float: right">
                            <form action="/post/comment/delete/{{ c.id }}/" method="post">
                                {% csrf_token %}
                                <button type="submit" class="badge bg-danger">ÏÇ≠Ï†ú</button>
                            </form>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            <hr>
            {% endfor %}
            <!-- Î∞òÎ≥µÎ¨∏Ïù¥ ÎÅùÎÇú Í≥≥ -->
        </div>
    </div>
</div>
{% endblock %}